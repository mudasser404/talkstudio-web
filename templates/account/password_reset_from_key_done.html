{% extends 'account/auth_base.html' %}
{% load i18n %}

{% block title %}{% trans "Password Reset Complete" %}{% endblock %}

{% block header_title %}{% trans "Password Reset Successful!" %}{% endblock %}
{% block header_subtitle %}{% trans "Your password has been changed successfully" %}{% endblock %}

{% block extra_css %}
<style>
    .success-animation {
        width: 100px;
        height: 100px;
        margin: 0 auto 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #2ECC71 0%, #27AE60 100%);
        border-radius: 50%;
        animation: successBounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 0 10px 30px rgba(46, 204, 113, 0.3);
    }

    .success-animation i {
        color: white;
        font-size: 48px;
        animation: checkMark 0.4s 0.3s ease-in-out both;
    }

    @keyframes successBounce {
        0% {
            transform: scale(0) rotate(-45deg);
            opacity: 0;
        }
        50% {
            transform: scale(1.1) rotate(5deg);
        }
        100% {
            transform: scale(1) rotate(0deg);
            opacity: 1;
        }
    }

    @keyframes checkMark {
        0% {
            transform: scale(0);
            opacity: 0;
        }
        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    .success-message {
        text-align: center;
        margin-bottom: 32px;
    }

    .success-message h3 {
        font-size: 20px;
        font-weight: 600;
        color: #1A3A31;
        margin-bottom: 12px;
    }

    .success-message p {
        font-size: 15px;
        color: #7A9B90;
        line-height: 1.6;
        margin: 0;
    }

    .info-card {
        background: #F0FBFC;
        border: 1px solid #B3E5EA;
        border-radius: 12px;
        padding: 20px;
        margin: 24px 0;
    }

    .info-card-content {
        display: flex;
        align-items: start;
        gap: 16px;
    }

    .info-card-icon {
        width: 40px;
        height: 40px;
        background: white;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .info-card-icon i {
        color: #40C4D4;
        font-size: 20px;
    }

    .info-card-text {
        flex: 1;
    }

    .info-card-text h4 {
        font-size: 15px;
        font-weight: 600;
        color: #1A3A31;
        margin-bottom: 8px;
    }

    .info-card-text p {
        font-size: 14px;
        color: #4A6B60;
        line-height: 1.6;
        margin: 0;
    }

    .security-tips {
        background: #FFF9E6;
        border: 1px solid #FFE082;
        border-radius: 12px;
        padding: 20px;
        margin: 24px 0;
    }

    .security-tips-title {
        font-size: 15px;
        font-weight: 600;
        color: #1A3A31;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .security-tips-title i {
        color: #FFA726;
    }

    .security-tips-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .security-tips-list li {
        padding: 8px 0;
        color: #666;
        font-size: 14px;
        display: flex;
        align-items: start;
        gap: 12px;
    }

    .security-tips-list li i {
        color: #FFA726;
        font-size: 14px;
        margin-top: 2px;
    }

    .action-button {
        margin-top: 24px;
    }

    .countdown {
        font-size: 13px;
        color: #7A9B90;
        margin-top: 12px;
    }
</style>
{% endblock %}

{% block content %}
<div class="text-center">
    <div class="success-animation">
        <i class="fas fa-check"></i>
    </div>

    <div class="success-message">
        <h3>{% trans "Your password has been reset successfully!" %}</h3>
        <p>{% trans "You can now use your new password to sign in to your account." %}</p>
    </div>

    <div class="info-card">
        <div class="info-card-content">
            <div class="info-card-icon">
                <i class="fas fa-lock"></i>
            </div>
            <div class="info-card-text">
                <h4>{% trans "Your Account is Secure" %}</h4>
                <p>{% trans "Your password has been encrypted and stored securely. No one, including our team, can access it." %}</p>
            </div>
        </div>
    </div>

    <div class="security-tips">
        <div class="security-tips-title">
            <i class="fas fa-shield-alt"></i>
            <span>{% trans "Security Tips" %}</span>
        </div>
        <ul class="security-tips-list">
            <li>
                <i class="fas fa-check-circle"></i>
                <span>{% trans "Never share your password with anyone" %}</span>
            </li>
            <li>
                <i class="fas fa-check-circle"></i>
                <span>{% trans "Use a unique password for this account" %}</span>
            </li>
            <li>
                <i class="fas fa-check-circle"></i>
                <span>{% trans "Change your password regularly for better security" %}</span>
            </li>
            <li>
                <i class="fas fa-check-circle"></i>
                <span>{% trans "Enable two-factor authentication if available" %}</span>
            </li>
        </ul>
    </div>

    <div class="action-button">
        <a href="{% url 'account_login' %}" class="btn btn-primary btn-lg" id="loginButton">
            <i class="fas fa-sign-in-alt me-2"></i>{% trans "Sign In Now" %}
        </a>
        <div class="countdown" id="countdown">
            {% trans "Redirecting to sign in page in" %} <span id="counter">5</span> {% trans "seconds" %}...
        </div>
    </div>
</div>
{% endblock %}

{% block footer %}
    {% trans "Need help?" %} <a href="/support/">{% trans "Contact Support" %}</a>
{% endblock %}

{% block extra_js %}
<script>
    // Auto redirect after 5 seconds
    let counter = 5;
    const counterElement = document.getElementById('counter');
    const loginUrl = "{% url 'account_login' %}";

    const countdown = setInterval(function() {
        counter--;
        counterElement.textContent = counter;

        if (counter <= 0) {
            clearInterval(countdown);
            window.location.href = loginUrl;
        }
    }, 1000);

    // Allow immediate redirect on button click
    document.getElementById('loginButton').addEventListener('click', function(e) {
        clearInterval(countdown);
    });
</script>
{% endblock %}